<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registrar usuarios</title>
</head>
<body>
  
<form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="form">

<!-- partial:index.partial.html -->
<div class="section">
    <div class="container">
        <div class="row full-height justify-content-center">
            <div class="col-12 text-center align-self-center py-5">
                <div class="section pb-5 pt-5 pt-sm-2 text-center"> 
                    <label for="reg-log"></label>
                    <div class="card-3d-wrap mx-auto back">
                        <div class="card-3d-wrapper">
                            <div class="card-front">
                                <div class="center-wrap">
                                    <div class="section text-center">
                                        <h4 class="mb-4 pb-3">Sign Up</h4>

                                        <div class="form-group">
                                            <input type="text" name="logname" formControlName="name" id="name" required class="form-style" placeholder="Your Full Name" id="logname" autocomplete="off">
                                            <i class="input-icon uil uil-user"></i>
                                            <div *ngIf="userForm.controls['name'].touched && userForm.controls['name'].errors">
                                                <small class="text2">El campo "name" es requerido.</small>
                                            </div>
                                        </div>	

                                        <div class="form-group mt-2">
                                            <input type="email" name="logemail" formControlName="email" id="email" [(ngModel)]="email" (blur)="checkEmailExists()" required class="form-style" placeholder="Your Email" id="logemail" autocomplete="off">
                                            <i class="input-icon uil uil-at"></i>
                                            <div *ngIf="userForm.controls['email'].errors && userForm.controls['email'].errors">
                                                <small class="text1">El campo "email" debe contar con el formato de un email.</small>
                                              </div>
                                              <div *ngIf="userForm.controls['email'].touched && userForm.controls['email'].errors">
                                                <small class="text2">El campo "email" es requerido.</small>
                                              </div>
                                              <div *ngIf="emailExists">
                                                <small class="text2">El email ya esta en uso.</small>
                                              </div>
                                        </div>

                                        <div class="form-group mt-2" [ngClass]="{ 'has-error': userForm.controls['password'].invalid && (userForm.controls['password'].dirty || userForm.controls['password'].touched) }">
                                            <input type="password" name="logpass" formControlName="password" id="password" required minlength="8" class="form-style" placeholder="Your Password" id="logpass" autocomplete="off">
                                            <i class="input-icon uil uil-lock-alt"></i>
                                            <div *ngIf="userForm.controls['password'].errors && userForm.controls['password'].errors">
                                                <small class="text1">El campo "password" debe contener minimo 8 caracteres.</small>
                                              </div>
                                              <div *ngIf="userForm.controls['password'].touched && userForm.controls['password'].errors">
                                                <small class="text2">El campo "password" es requerido.</small>
                                              </div>
                                        </div>
                                        <button type="submit" class="btn mt-4" [disabled]="!isFormValid || emailExists"  >Crear usuario</button>
                                        <br>
                                        <button type="submit" class="btn mt-4" routerLink="/login">Ya cuento con una cuenta</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- partial -->
<script  src="./script.js"></script>




</form>




</body>
</html>